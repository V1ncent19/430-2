\documentclass[11pt,a4paper]{ctexart}
%以下为所使用的宏包
\usepackage{ulem}%下划线
\usepackage{amsmath,amsfonts,amssymb,amsthm,amsbsy}%数学符号
\usepackage{graphicx}%插入图片
\usepackage{booktabs}%三线表
%\usepackage{indentfirst}%首行缩进
\usepackage{tikz}%作图
\usepackage{appendix}%附录
\usepackage{array}%多行公式/数组
\usepackage{makecell}%表格缩并
\usepackage{siunitx}%SI单位--\SI{number}{unit}
\usepackage{mathrsfs}%数学字体
\usepackage{enumitem}%列表间距
\usepackage{multirow}%列表横向合并单元格
\usepackage[colorlinks,linkcolor=red,anchorcolor=blue,citecolor=green]{hyperref}%超链接引用
\usepackage{float}%图片、表格位置排版
\usepackage{pict2e,keyval,fp,diagbox}%带有斜线的表格
\usepackage{fancyvrb,listings}%设置代码插入环境
\usepackage{minted}%代码环境设置
\usepackage{fontspec}%字体设置
\usepackage{color,xcolor}%颜色设置
\usepackage{titlesec} %自定义标题格式
\usepackage{tabularx}%列表扩展
\usepackage{authblk}%titlepage作者信息
\usepackage{nicematrix}%更好的矩阵标定
\usepackage{fbox}%更多浮动体盒子



%以下是页边距设置
\usepackage[left=0.5in,right=0.5in,top=0.81in,bottom=0.8in]{geometry}

%以下是段行设置
\linespread{1.4}%行距
\setlength{\parskip}{0.1\baselineskip}%段距
\setlength{\parindent}{2em}%缩进


%其他设置
\numberwithin{equation}{section}%公式按照章节编号
\newenvironment{point}{\raggedright$\blacktriangleright$}{}
\newenvironment{algorithm}[1]{\vspace{12pt} \hrule\hrule \vspace{3pt} \noindent\textbf{\color[HTML]{E63F00}Algorithm } \,\textit{#1} \vspace{3pt} \hrule\vspace{6pt}}{\vspace{6pt}\hrule\hrule \vspace{12pt}} % 算法伪代码格式环境


%代码环境\lst设置
\definecolor{CodeBlue}{HTML}{268BD2}
\definecolor{CodeBlue2}{HTML}{0000CD}
\definecolor{CodeGreen}{HTML}{2AA1A2}
\definecolor{CodeRed}{HTML}{CB4B16}
\definecolor{CodeYellow}{HTML}{B58900}
\definecolor{CodePurPle}{HTML}{D33682}
\definecolor{CodeGreen2}{HTML}{859900}
\lstset{
    basicstyle=\tt,%字体设置
    numbers=left, %设置行号位置
    numberstyle=\tiny\color{black}, %设置行号大小
    keywordstyle=\color{black}, %设置关键字颜色
    stringstyle=\color{CodeRed}, %设置字符串颜色
    commentstyle=\color{CodeGreen}, %设置注释颜色
    frame=single, %设置边框格式
    escapeinside=`, %逃逸字符(1左面的键)，用于显示中文
    %breaklines, %自动折行
    extendedchars=false, %解决代码跨页时，章节标题，页眉等汉字不显示的问题
    xleftmargin=2em,xrightmargin=2em, aboveskip=1em, %设置边距
    tabsize=4, %设置tab空格数
    showspaces=false, %不显示空格
    emph={TRUE,FALSE,NULL,NAN,NA,<-,},emphstyle=\color{CodeBlue2}, %其他高亮}
}


%节标题格式设置
\titleformat{\section}[block]{\large\bfseries}{Exercise \arabic{section}}{1em}{}[]
\titleformat{\subsection}[block]{}{    \arabic{section}.(\alph{subsection})}{1em}{}[]
% \titleformat{\subsubsection}[block]{\normalsize\bfseries}{    \arabic{subsection}-\alph{subsubsection}}{1em}{}[]
% \titleformat{\paragraph}[block]{\small\bfseries}{[\arabic{paragraph}]}{1em}{}[]


% \titleformat{\sectioncommand}[shape]{format}{title-label}{sep}{before-title}[after-title]

% newcommand
\newcommand{\F}{\mathcal{F}}


% 中文字号
% 初号42pt, 小初36pt, 一号26pt, 小一24pt, 二号22pt, 小二18pt, 三号16pt, 小三15pt, 四号14pt, 小四12pt, 五号10.5pt, 小五9pt


\begin{document}

\begin{center}\thispagestyle{plain}

{\LARGE\textbf{STAT 430-2 2025 Winter}}

{\Large\textbf{HW3}}

Tuorui Peng\footnote{TuoruiPeng2028@u.northwestern.edu}
\end{center}

\thispagestyle{myheadings}\markright{Compiled using \LaTeX}
\pagestyle{myheadings}\markright{Tuorui Peng}



% Exercise 5.3.3, 5.3.6, 5.3.10, 5.3.21, 5.3.24((a), (b)), 5.4.7 (Hint: Exercise 5.4.6), 5.4.10, 5.4.11,
% 5.4.12, 5.4.14 ((a),(b))



\section{5.3.3}

We prove the following: $ (a) \Rightarrow (b) $, $ (b) \Rightarrow (e) $, $ (d) \Rightarrow (e) $, $ (c) \Rightarrow \text{Doob's convergence} $. Combined with the original condition in Doob's convergence that: $ (e) \Rightarrow \text{Doob's convergence} $, we have the equivalence of all conditions.

\begin{enumerate}[topsep=2pt,itemsep=2pt]
    \item[$ (a) \Rightarrow (b) $] If $ \lim_n \mathbb{E}_{  }\left[ \left\vert X_n \right\vert  \right] =M $, then fix any $ \varepsilon >0 $, there  $ \exists N_0$, such that $ \forall n > N_0 $, $ \mathbb{E}_{  }\left[ \left\vert X_n \right\vert  \right] < M + \varepsilon $. Then 
    \begin{align*}
        \sup_n \mathbb{E}_{  }\left[ \left\vert X_n \right\vert  \right]\leq \sup_{k=1}^{N_0} \mathbb{E}_{  }\left[ \left\vert X_k \right\vert  \right] \vee (M+\varepsilon) < \infty 
    \end{align*}
    Thus $ (b) $ holds.
    \item[$ (b) \Rightarrow (e) $] Note that $ \left\vert x \right\vert =x_+ + x_- $, we thus have $ \forall n $:
    \begin{align*}
         \mathbb{E}_{  }\left[ \left\vert X_n \right\vert  \right] =& \mathbb{E}_{  }\left[ (X_n)_+ \right]  + \mathbb{E}_{  }\left[ (X_n)_- \right] \\
         \geq& \mathbb{E}_{  }\left[ (X_n)_+ \right] 
    \end{align*}
    thus $ \sup_n \mathbb{E}_{  }\left[ \left\vert X_n \right\vert  \right]< \infty $ would yield $ \sup_n \mathbb{E}_{  }\left[ (X_n)_+ \right] < \infty $, which is $ (e) $.
    \item[$ (d) \Rightarrow (e) $] Idea is the same as $ (a) \Rightarrow (b) $ by just replacing $ \left\vert X_n \right\vert $ with $ (X_n)_+ $.
    \item[$ (c) \Rightarrow \text{Doob} $] In the prove of Doob's convergence, we have in Doob's up-crossing:
    \begin{align*}
        \mathbb{E}_{  }\left[ U_n[a,b] \right] \leq& \dfrac{ 1 }{ b-a }\mathbb{E}_{  }\left[ (X_n-a)_+ \right] \leq \dfrac{ 1 }{ (b-a) }\big(\left\vert a \right\vert + \mathbb{E}_{  }\left[ (X_n)_+ \right] \big)    
    \end{align*}
    then applying Fatou's lemma, we have:
    \begin{align*}
        \mathbb{E}_{  }\left[ \liminf_n U_n[a,b] \right] \leq& \dfrac{ 1 }{ (b-a) }\big(\left\vert a \right\vert + \liminf_n \mathbb{E}_{  }\left[ (X_n)_+ \right] \big) < \infty
    \end{align*}
    then the rest of the proof is the same as Doob's convergence, thus $ (c) $ implies Doob's convergence.
\end{enumerate}

    

\section{5.3.6}


We verify that $ X_n := W_n+an-(K+a)N_{n-1} $ is a sup-MG as follows:
\begin{align*}
    \mathbb{E}_{  }\left[ X_{n+1}-X_n | \F_n \right] =& \mathbb{E}_{  }\left[ W_{n+1}+a(n+1)-(K+a)N_n - W_n-an+(K+a)N_{n-1} | \F_n \right] \\  
    =& \begin{cases}
        \text{if }W_n \geq b,& \mathbb{E}_{  }\left[ W_{n+1}-W_n + a | \F_n \right] \mathbb{1}_{W_n \geq b} \leq 0\\
        \text{if }W_n < b,& \mathbb{E}_{  }\left[ W_{n+1}-W_n - K | \F_n \right] \leq 0
    \end{cases}
\end{align*}
and finite expectation is easily verified. Thus $ X_n $ is a supermartingale. Further we notice that $ X_n $ have uniformly bounded difference $ 2(K+a) $, thus by (prop 5.3.5) we have that
\begin{align*}
    \mathbb{P}_{  }\left( \lim_n X_n \text{ exists }\bigcup \liminf_n X_n = -\infty \right) = 1  
\end{align*}

Now consider the event that $ \{N_\infty = \text{some } \nu < \infty  \} $ We note that in this case, we have for large $ n $:
\begin{align*}
    \liminf_n X_n = \liminf_n W_n + an - (K+a)\nu \to \infty
\end{align*}
since $ W_n $ is non-negative. Thus
\begin{align*}
    \mathbb{P}_{  }\left( N_\infty < \infty \right)  \leq \mathbb{P}_{  }\left( \liminf_n X_n = \infty  \right) = \mathbb{P}_{  }\left( \big(\lim_n X_n \text{ exists }\bigcup \liminf_n X_n = -\infty\big)^\complement \right) = 0 
\end{align*}

\section{5.3.10}

We verify that $ W_n:=\dfrac{ X_n + 1 }{ \prod_{k=1}^{n-1}(Y_k+1) }  $ is a supermartingale as follows:
\begin{align*}
    \mathbb{E}_{  }\left[ W_{n+1} - W_n | \F_n \right] =& \mathbb{E}_{  }\left[  \dfrac{ X_{n+1} + 1 }{ \prod_{k=1}^{n}(Y_k+1) } - \dfrac{ X_n + 1 }{ \prod_{k=1}^{n-1}(Y_k+1) } | \F_n \right] \\
    =& \dfrac{ 1 }{ \prod_{k=1}^{n}(Y_k+1) } \mathbb{E}_{  }\left[  X_{n+1} + 1 - (X_n+1)(Y_n+1)  | \F_n \right] \leq 0
\end{align*}
in which some technical conditions are: $ \log \prod_{k=1}^\infty (Y_k+1)=\sum_{k=1}^\infty \log (Y_k+1)\leq \sum_{k=1}^\infty Y_k <\infty $, and $ \mathbb{E}_{  }\left[ \left\vert W_n \right\vert  \right]  \leq \mathbb{E}_{  }\left[ \left\vert X_n \right\vert  \right] <\infty   $. Thus we have that $ W_n $ is a (non-negative) supermartingalem. Thus directly we have that $ \lim_n W_n $ exists a.s., denote it as $ W_\infty $.

Then note that for each $ \omega \in \Omega $: 
\begin{align*}
    \prod_{k=1}^{n-1}(Y_k(\omega )+1) <\infty,\quad \text{a.s.}
\end{align*}
and is an increasing sequence, thus it has a limit $ Z(\omega ) $. Combine the fact that $ W_n \xrightarrow[]{\mathrm{a.s.}} W_\infty $, we have
\begin{align*}
    X_n \xrightarrow[]{\mathrm{a.s.}}  W_\infty Z -1
\end{align*}




\section{5.3.21}

Note that $ \F^A_k:=\sigma (\mathcal{A},Z_0,\ldots,Z_{k-1}) $ and $ \F^B_k:=\sigma (\mathcal{B},Y_0,\ldots,Y_{k-1}) $ are both filtrations in $ \F $, and also we have that
\begin{align*}
    Y_k = \mathbb{E}_{  }\left[ X| \F^A_k \right]\text{ is U.I. M.G.}\\
    Z_k = \mathbb{E}_{  }\left[ X| \F^B_k \right]\text{ is U.I. M.G.}  
\end{align*}
which are easy to verify. Thus we have by Theorem 5.3.12 that there exists some $ Y_\infty, Z_\infty $ s.t.
\begin{align*}
    Y_k = \mathbb{E}_{  }\left[ X| \F^A_k \right] \xrightarrow[L_1]{\mathrm{a.s.}} Y_\infty\\ 
    Z_k = \mathbb{E}_{  }\left[ X| \F^B_k \right] \xrightarrow[L_1]{\mathrm{a.s.}} Z_\infty
\end{align*}

Now follow similar idea as Theorem 5.3.15, we would obtain that $ Y_\infty \in m\F^A_\infty $ and then $ Y_\infty = \mathbb{E}_{  }\left[ X|\F^A_\infty \right]  $ where $ \F^A_\infty = \sigma (\mathcal{A}, Z_0,\ldots) $; similarly we have $ Z_\infty = \mathbb{E}_{  }\left[ X|\F^B_\infty \right]  $ where $ \F^B_\infty = \sigma (\mathcal{B}, Y_0,\ldots) $.

Then we have:
\begin{align*}
    \mathbb{E}_{  }\left[ Y_\infty | \F^B\infty \right] =& \mathbb{E}_{  }\left[ \mathbb{E}_{  }\left[ X|\F^A_\infty \right] |\F^B\infty  \right] \\
    =& \mathbb{E}_{  }\left[ \mathbb{E}_{  }\left[ X|\F^B_\infty \right] |\F^A\infty  \right]\\
    =& \mathbb{E}_{  }\left[ Z_\infty | \F^A\infty \right] = Z_\infty
\end{align*}
and vice versa $ \mathbb{E}_{  }\left[ Z_\infty | \F^A\infty \right] = Y_\infty $. Together we have
\begin{align*}
    Y_\infty = \mathbb{E}_{  }\left[ Z_\infty | \F^A\infty \right]=\mathbb{E}_{  }\left[ \mathbb{E}_{  }\left[ Y_\infty | \F^B\infty \right] | \F^A\infty \right]
\end{align*}
thus we must have $ Y_\infty = Z_\infty $ a.s., then apply the U.I. property again we have $ Y_n-Z_n \xrightarrow[L_1]{\mathrm{a.s.}} 0 $.


\section{5.3.24}


\subsection{}

For any fixed $ W $, there  exists some $ n_W $ such that $ W\in L^2\F_{n_W} $, then we have for $ n> n_W $ that 
\begin{align*}
    \mathbb{E}_{  }\left[ WZ_n \right] =& \mathbb{E}_{  }\left[ \mathbb{E}_{  }\left[ WZ_n|\F_{n_W} \right]  \right]\\
    =& \mathbb{E}_{  }\left[ \mathbb{E}_{  }\left[ \dfrac{ W }{ \sqrt{n} }\sum_{k=1}^{n_W}\xi _k |\F_{n_W} \right]  + \dfrac{ \mathbb{E}_{  }\left[ W|\F_{n_W} \right]  }{ \sqrt{n} }\sum_{k={n_W+1}}^\infty \xi _k   \right] \to 0
\end{align*}
since the first term decay to $ 0 $ as $ n\to\infty $, the second term simply has mean 0.

\subsection{}

Define $ W_n:= \mathbb{E}_{  }\left[ W| \F_{n} \right] $, in this way we can write that $ WZ_n = W_mZ_n + (W-W_m)Z_n $. Then we consider the two parts:
\begin{itemize}[topsep=2pt,itemsep=0pt]
    \item[Part 1:] For any fixed $ m $ we have by (a) that
    \begin{align*}
        \mathbb{E}_{  }\left[ W_mZ_n \right] \to 0,\quad (n\to\infty) 
    \end{align*}
    \item[Part 2:] We have
    \begin{align*}
        \limsup_{n\to\infty} \mathbb{E}_{  }\left[ \left\vert (W-W_m)Z-n \right\vert  \right]  \leq & (\lim_{n\to\infty}\mathbb{E}_{  }\left[ \left\vert Z_n \right\vert  \right] )\cdot \mathbb{E}_{  }\left[ \left\vert W-W_m \right\vert  \right] \\
        =& \mathrm{const}\cdot \mathbb{E}_{  }\left[ \left\vert W-W_m \right\vert  \right] 
    \end{align*}
    since by CLT, we would have $ Z_n\xrightarrow[]{\mathrm{d}} N(0,1) $.
\end{itemize}
Together we have for any $ m\in \mathbb{N}^+ $, 
\begin{align*}
    \limsup_{n\to\infty} \mathbb{E}_{  }\left[ \left\vert WZ_n \right\vert  \right] \leq \mathrm{const}\cdot \mathbb{E}_{  }\left[ \left\vert W-W_m \right\vert  \right]
\end{align*}
further we notice that by the definition of $ W_m $ we have $ W_m\xrightarrow[L_1]{\mathrm{a.s.}} W $ thus $ \mathbb{E}_{  }\left[ \left\vert W-W_m \right\vert  \right] \to 0 $, thus we have $ \limsup_{n\to\infty} \mathbb{E}_{  }\left[ \left\vert WZ_n \right\vert  \right] =0 $.

Now if there exists some $ \tilde{Z} \in \F  $ s.t. $ Z\xrightarrow[]{L_2} \tilde{Z} $, which means that
\begin{align*}
    \mathbb{E}_{  }\left[ \left\vert Z_n-\tilde{Z} \right\vert ^2 \right] \to 0 
\end{align*}
we would see that
\begin{align*}
     \mathrm{L.H.S.} =& \mathbb{E}_{  }\left[ Z_n^2 \right] + \mathbb{E}_{  }\left[ \tilde{Z}^2 \right] - 2\mathbb{E}_{  }\left[ Z_n\tilde{Z} \right] \to 0\\
\end{align*}
however we have $ \liminf_n \mathbb{E}_{  }\left[ Z_n^2 \right]  \geq \mathbb{E}_{  }\left[ \liminf_n Z_n^2 \right] >0 $ by CLT, and that $ \mathbb{E}_{  }\left[ Z_n\tilde{Z} \right] \to 0 $ by the above argument, thus we have a contradiction. Thus $ Z $ does not converge in $ L_2 $. 



\section{5.4.7}

We first prove (5.4.6): Since $ \max $ is a convex function, we have that $ Y_n:=\max\{X_n,-1\} $ is still a sub-M.G. Now assume that $ \mathbb{E}_{  }\left[ \sup \left\vert Y_n \right\vert  \right]  <\infty $ i.e. $ Y_n $ is integrable. We consider the stopping time defined as:
\begin{align*}
    \tau:= \inf\{n: Y_n<0\} 
\end{align*}
and since $ \inf_n X_n <0 $ a.s., we have $ \tau <\infty $ a.s., for which $ Y_\tau <0 $, and thus we further have by Doob's optional stopping theorem that
\begin{align*}
    0>\mathbb{E}_{  }\left[ Y_\tau \right] \geq & \mathbb{E}_{  }\left[ Y_0 \right] \geq 0
\end{align*}
which is a contradiction. Thus we have that $ \mathbb{E}_{  }\left[ \sup \left\vert Y_n \right\vert  \right]  =\infty $.


Now using the lemma, we solve (5.4.7).

\subsection{}

For random walk, we know that we have $ S_n/\sqrt{n}\xrightarrow[]{\mathrm{d}} N(0,1) $ which is a non-degenerate distribution. Thus we have that $ \mathbb{P}_{  }\left( \lim_n S_n \text{ exists} \right)  = 0 $, because for the event $ \{\lim_n S_n \text{ exists}\} $, we must have that $ S_n(\omega )/\sqrt{n}\to 0 $. 

For such M.G. with bounded difference, by (prop 5.3.5) we have that 
\begin{align*}
    \lim_n S_n \text{ exists }, or \liminf_n S_n = -\infty,\, \limsup_n S_n = \infty,\quad \text{a.s.}
\end{align*}
and from the above argument we have that the first case is w.p. 0, thus we have that $ \limsup_n S_n = \infty \& \liminf_n S_n = -\infty $ a.s., which means that $ \tau_b<\infty $ a.s.

\subsection{}

Note that we have $ S_{\tau_b} \geq b >0 $, i.e. $ \sup S_{n\wedge \tau_b} >0 $. And since $ \tau_b $ is a stopping time, we also have that $ S_{n\wedge b} $ is a M.G. (with $ S_{0\wedge \tau_b}=0 $), thus by the lemma we have that $ \mathbb{E}_{  }\left[ \min\{S_n:n\leq \tau_b \}\right] =  \mathbb{E}_{  }\left[ \inf_n S_{n\wedge \tau_b} \right] = \infty  $.



\section{5.4.10}


\subsection{}
First we have that
\begin{align*}
    \mathbb{E}_{  }\left[ S_\tau \right]=& \mathbb{E}_{  }\left[ \sum_{k=1}^\infty \xi _k I_{k\leq \tau} \right] \\
    \leq& \mathbb{E}_{  }\left[ \sum_{k=1}^\infty \left\vert \xi _k \right\vert  _k I_{k\leq \tau} \right]\\
    \mathop{ = }\limits^{\text{monotone}}_{\text{converge}} & \sum_{k=1}^\infty \mathbb{E}_{  }\left[ \left\vert \xi _k \right\vert  \right] \mathbb{P}_{  }\left( k\leq \tau \right) \\
    =&\mathbb{E}_{  }\left[ \left\vert \xi _1 \right\vert  \right]\sum_{k=1}^\infty \mathbb{P}_{  }\left( k\leq \tau \right) = \mathbb{E}_{  }\left[ \left\vert \xi _1 \right\vert  \right] \mathbb{E}_{  }\left[ \tau \right] <\infty
\end{align*}

Then by DCT, we can apply the above argument to $ S_\tau $ directly and obtain that $ \mathbb{E}_{  }\left[ S_\tau \right] = \mathbb{E}_{  }\left[ \xi _1 \right] \mathbb{E}_{  }\left[ \tau \right]   $.

\subsection{}

Assume $ \mathbb{E}_{  }\left[ \xi _i \right] = 0  $(otherwise we can replace $ \xi _i $ with $ \xi _i-\mathbb{E}_{  }\left[ \xi _i \right]  $), which would not influence the result. Now it suffice to prove $ \mathbb{E}_{  }\left[ S_\tau^2 \right] =var(\xi _1)\mathbb{E}_{  }\left[ \tau \right]  $. To do so we consider $ S_{n\wedge \tau} $ for which we have
\begin{align*}
    S_{n\wedge \tau}=\sum_{k=1}^n \xi _k I_{k\leq \tau} 
\end{align*}
and we have
\begin{align*}
    \mathbb{E}_{  }\left[ S_{n\wedge \tau}^2 \right] =& \mathbb{E}_{  }\left[ \sum_{k=1}^n \xi _k^2 I_{k\leq \tau} \right] = var(\xi _1)\sum_{k=1}^n \mathbb{P}_{  }\left( k\leq \tau \right) = var(\xi _1)\mathbb{E}_{  }\left[ \tau \right] <\infty
\end{align*}
for which right hand side does not depend on $ n $. Thus here we can apply Doob's $ L_p $ convergence theorem ($ p=2 $) to obtain 
\begin{align*}
    \mathbb{E}_{  }\left[ S_\tau^2 \right] = \mathbb{E}_{  }\left[ \lim_n S_{n\wedge \tau}^2 \right] = var(\xi _1)\mathbb{E}_{  }\left[ \tau \right]  
\end{align*}


\subsection{}

If $ \xi \geq 0 $, then we have
    \begin{align*}
        \mathbb{E}_{  }\left[ S_\tau \right]=& \mathbb{E}_{  }\left[ \sum_{k=1}^\infty \xi _k I_{k\leq \tau} \right] \\
        \mathop{ = }\limits^{\text{monotone}}_{\text{converge}} & \sum_{k=1}^\infty \mathbb{E}_{  }\left[ \xi _k \right] \mathbb{P}_{  }\left( k\leq \tau \right) \\
        =&\mathbb{E}_{  }\left[\xi _1 \right]\sum_{k=1}^\infty \mathbb{P}_{  }\left( k\leq \tau \right) = \mathbb{E}_{  }\left[ \xi _1  \right] \mathbb{E}_{  }\left[ \tau \right] 
    \end{align*}

The proof of Wald's second is still the same.

\section{5.4.11}

\subsection{}
In 5.4.7 we already proved it (by noting that SRW is also a M.G. with bounded difference).

\subsection{}

By the similar argument as in (coroll 5.4.8) in which we use the M.G. $ M_n := \exp( \lambda  S_n  )/M(\lambda )^{n} $ we have
\begin{align*}
    S_{\tau_{a,b}}=\begin{cases}
        -a,&w.p. \dfrac{ e^{\lambda b } -1 }{ e^{\lambda b - e^{-\lambda a}} } \\
        b,&w.p. \dfrac{ 1-e^{-\lambda a}  }{ e^{\lambda b - e^{-\lambda a}} }
    \end{cases} 
\end{align*}
where $ \lambda = \log\dfrac{ 1-p }{ p } $. Thus we have
\begin{align*}
    \mathbb{E}_{  }\left[ S_{\tau_{a,b}} \right]  =& -a\cdot \dfrac{ e^{\lambda b } -1 }{ e^{\lambda b }- e^{-\lambda a} } + b\cdot \dfrac{ 1- e^{-\lambda a}  }{ e^{\lambda b }- e^{-\lambda a} }\\
    =& \mathbb{E}_{  }\left[\xi _1 \right]\mathbb{E}_{  }\left[ \tau_{a,b} \right]\\
    =&(2p-1)\mathbb{E}_{  }\left[ \tau_{a,b} \right]  
\end{align*}
and we have
\begin{align*}
    \mathbb{E}_{  }\left[ \tau_{a,b} \right] = \dfrac{ 1 }{ 2p-1 }\big(  -a\cdot \dfrac{ e^{\lambda b } -1 }{ e^{\lambda b }- e^{-\lambda a} } + b\cdot \dfrac{ 1- e^{-\lambda a}  }{ e^{\lambda b }- e^{-\lambda a} } \big) 
\end{align*}
where $ \lambda = \log\dfrac{ 1-p }{ p } $.

And for the case that $ p=1/2 $, i.e. $ \lambda = 0 $, we use Wald's second to obtain that
\begin{align*}
    \mathbb{E}_{  }\left[ \tau_{a,b} \right] = &\mathbb{E}_{  }\left[ S_\tau^2 \right] / var(\xi _1)\\
    =& \mathbb{E}_{  }\left[ S_\tau^2 \right] \\
    =& ab 
\end{align*}


\subsection{}

We have
\begin{align*}
    \tau_{a,b} = \inf\{n: S_n = -a\} \wedge \inf\{n: S_n = b\} \mathop{ \to }\limits_{a\to\infty} \inf\{n: S_n = b\} = \tau_b
\end{align*}
(and the convergence is monotone, which is trivial). We thus have by Wald's first that
\begin{align*}
    \mathbb{E}_{  }\left[ \tau_b \right] = \mathbb{E}_{  }\left[ S_{\tau_b} \right] / \mathbb{E}_{  }\left[ \xi _1 \right] = b/(2p-1)
\end{align*}

\subsection{}

For $ p \geq 1/2$, it's a submartingale, thus by 5.4.7 we have $ \tau_b<\infty  $ a.s..

\subsection{}


\begin{align*}
    \mathbb{E}_{  }\left[ Y_{n+1}|\F_n \right]  =& \big( S_{n}^4 + 6S_{n}^2 +  1 \big) - 6(n+1)\big( S_n^2 + 1 \big) + c_1(n^2 + 2n + 1) + c_2(n+1)\\
    =& S_{n}^4 -6nS_n^2 + c_1n^2 + c_2n + \big( 1-6(n+1) + c_1(2n+1) + c_2 \big)
\end{align*}
to make it a M.G., we have $ c_1=3, c_2=2 $, thus we have
\begin{align*}
    Y_n:= S_n^4 -6nS_n^2 + 3n^2 + 2n 
\end{align*}
is a M.G. 

For which we have
\begin{align*}
    \mathbb{E}_{  }\left[ Y_{\tau_{b,b}} \right]=& \mathbb{E}_{  }\left[ \mathbb{E}_{  }\left[ Y_{k} | \tau_{b,b}=k \right]  \right] \\
    =& b^4 - 6b^2\mathbb{E}_{  }\left[ \tau_{b,b} \right] + 3\mathbb{E}_{  }\left[ \tau_{b,b}^2 \right] + 2\mathbb{E}_{  }\left[ \tau_{b,b} \right] \\ 
    =& b^4 -6b^2\cdot b^2 + 3\mathbb{E}_{  }\left[ \tau_{b,b}^2 \right] + 2b^2\\
    =&\mathbb{E}_{  }\left[ Y_0 \right] = 0 
\end{align*}
where the last step is by Doob's optional stopping theorem. Now we have
\begin{align*}
    \mathbb{E}_{  }\left[ \tau_{b,b} ^2\right]  = \dfrac{ 5b^4 - 2b^2 }{ 3 }  
\end{align*}



\section{5.4.12}

\subsection{}
Since $ M_n = \exp\left[ \lambda S_n \right]/\mathbb{E}_{  }\left[ \exp\left[ \lambda n\xi _1 \right] \right]  $ is a M.G., then by Doob's optional stopping theorem we have
\begin{align*}
    1= &\mathbb{E}_{  }\left[ M_0 \right]\\
    =&\mathbb{E}_{  }\left[ M_{\tau_b} \right]  \\
    =& \mathbb{E}_{  }\left[ \exp\left[ \lambda S_{\tau_b} \right] / \mathbb{E}_{  }\left[ \exp\left[ \lambda \xi _1 \right] \right] ^{\tau_b}  \right] \\
    =&e^{\lambda b}\mathbb{E}_{  }\left[ M(\lambda )^{-\tau_b} \right] 
\end{align*}


\subsection{}



Denote $ s=M(\lambda )^{-1}\in (0,1) $ for some $ \lambda  $, and use $ b=1 $ in the above result then we have
\begin{align*}
    \mathbb{E}_{  }\left[ s^{\tau_1} \right]=& e^{-\lambda }  
\end{align*}
and that
\begin{align*}
    \mathbb{E}_{  }\left[ \tau_b \right] = e^{-\lambda b}= \mathbb{E}_{  }\left[ s^{\tau_1} \right]^b
\end{align*}

Now we revisit $ s = M(\lambda )^{-1} = \frac{1}{pe^{\lambda }+qe^{-\lambda }} $, and we have
\begin{align*}
    e^{-\lambda }=&\dfrac{ 1 }{ 2qs } \dfrac{ 2qe^{-\lambda } }{ pe^{\lambda }+qe^{-\lambda } }\\
    =&\dfrac{ 1 }{ 2qs }\left( 1-\dfrac{ pe^{\lambda }-qe^{-\lambda } }{ pe^{\lambda }+qe^{-\lambda } }  \right)\\
    =&\dfrac{ 1 }{ 2qs }\left( 1- \sqrt{ \dfrac{ (pe^{\lambda }-qe^{-\lambda })^2 }{ (pe^{\lambda }+qe^{-\lambda })^2 } }  \right)\\
    =&\dfrac{ 1 }{ 2qs }\left( 1- \sqrt{ 1- 4\dfrac{ pe^{\lambda }\cdot qe^{-\lambda } }{ pe^{\lambda }+qe^{-\lambda } }  }  \right)\\
    =&\dfrac{ 1 }{ 2qs }\left( 1- \sqrt{ 1- 4pqs^2 }  \right)
\end{align*}
substitute this back to the previous result we have
\begin{align*}
    \mathbb{E}_{  }\left[ s^{\tau_1} \right] = e^{-\lambda } = \dfrac{ 1 }{ 2qs }\left( 1- \sqrt{ 1- 4pqs^2 }  \right),\quad s=M(\lambda )^{-1}\in (0,1),\quad p \geq 1/2 
\end{align*}

\subsection{}

In 5.4.11 (c) we had that $ \tau_{a,b}\mathop{ \to }\limits^{a\to \infty} \tau_b  $ a.s.. Thus we have
\begin{align*}
    \mathbb{P}_{  }\left(  S_{\tau_{a,b}} = b  \right) \to  \mathbb{P}_{  }\left( S_{\tau_b}=b \right) = \mathbb{P}_{  }\left( \tau_b<\infty \right) = \dfrac{ 1 }{ e^{\lambda _\star b} } = \exp\left[ -\lambda _\star b \right] 
\end{align*}
where $ \lambda _\star = \log\dfrac{ 1-p }{ p } $.

\subsection{}

Continuing from the previous result, we have
\begin{align*}
    \mathbb{P}_{  }\left( S_{\tau_b}=b \right) = \exp\left[ -\lambda _\star b \right] ,\quad b\in \mathbb{N}^+
\end{align*}
which gives us for $ Z:= 1+ \max_{k\geq 0}S_k $ that:
\begin{align*}
    \mathbb{P}_{  }\left( Z=b+1 \right) =&  \mathbb{P}_{  }\left( \max_{k\geq 0}S_k = b \right)\\
    =& \mathbb{P}_{  }\left( \tau_b <\infty, \tau_{b+1}=\infty \right)\\
    =& \mathbb{P}_{  }\left( \tau_b <\infty,  \text{after reaching } b, \text{never reach } b+1 \right)\\
    =& \mathbb{P}_{  }\left( \tau_b < \infty \right)\big(1- \mathbb{P}_{  }\left( \tau_1 = \infty \right) \big)\\
    =& \exp\left[ -\lambda _\star b \right] \big(1- \exp\left[ -\lambda _\star \right]\\
    \sim& \mathrm{ Geo }( 1- \exp\left[ -\lambda _\star \right] )
\end{align*}



\section{5.4.14}

Denote $ 26 = \kappa  $

\subsection{}


We have
\begin{align*}
    \mathbb{E}_{  }\left[ M_{n+1}|\F_n \right] =& \dfrac{ 1 }{ \kappa  }M_n\times \kappa +(1-\dfrac{ 1 }{ \kappa  } )\times 0 = M_n  
\end{align*}
thus $ M_n $ is a martingale.

The construction of total gain would look like:
\begin{align*}
    M_n = \sum_{n} \big( \kappa ^{10}(\kappa \mathbf{1}_\mathrm{ PROBABILITY } -1 ) + \kappa ^{9}( \kappa \mathbf{1}_\mathrm{ PROBABILIT } -1 ) + \cdots + \kappa ^{1}( \kappa \mathbf{1}_\mathrm{ PR } -1 ) + \kappa ^{0}( \kappa \mathbf{1}_\mathrm{ P } -1 ) \big)
\end{align*}



\subsection{}


We see that $ \hat{\tau} $ is equivalent to that $ \hat{\tau}:=\inf\{n\geq 11: \text{gain of a gamblers } = \kappa ^{11}\} $ (i.e. when the gambler win 11 consercutive games, he gets the word `PROBABILITY'). WHEN The gambler wins 11 consercutive games, there are other $ \hat{\tau}-1 $ gamblers losing. And as we mentioned earlier, we have $ M_n $ being a martingale, thus by Doob's optional stopping theorem we have
\begin{align*}
    0=&\mathbb{E}_{  }\left[ M_0 \right] = \mathbb{E}_{  }\left[ M_{\hat{\tau}} \right] = \mathbb{E}_{  }\left[ \mathbb{E}_{  }\left[ M_{k}| \tau=k \right]  \right]= \sum_{k=0}^{10}(\kappa ^{k+1}-\kappa ^k) - ( \mathbb{E}_{  }\left[ \hat{\tau} \right] -1 )
\end{align*}
And it gives that
\begin{align*}
    \mathbb{E}_{  }\left[ \hat{\tau} \right] = \kappa ^{11}=26^{11}
\end{align*}


For `ABRACADABRA' = `ABRA' + `CAD' + `ABRA', we have that
\begin{align*}
    0=& \mathbb{E}_{  }\left[ M_0 \right] = \sum_{k=0}^{10}(\kappa ^{k+1}-\kappa ^k) + \sum_{k=0}^{3}(\kappa ^{k+1}-\kappa ^k) - ( \mathbb{E}_{  }\left[ \tilde{\tau} \right] -2 )=\kappa ^{11} + \kappa ^{4} - \mathbb{E}_{  }\left[ \tilde{\tau} \right]  \\
    \Rightarrow \mathbb{E}_{  }\left[ \tilde{\tau} \right] =& \kappa ^{11} + \kappa ^{4}=26^{11}+26^4
\end{align*}
where $ +\kappa ^4 $ for that, when reaching `ABRACADABRA', there is also another gambler who was winning at the first 4 letters `ABRA'.























































    









 





    





























\end{document}
